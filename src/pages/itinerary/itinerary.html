<ion-header>
  <ion-navbar>
    <ion-title>Itinerary</ion-title>
  </ion-navbar>
</ion-header>

<ion-content >
 
  <ion-list no-lines>
    <ion-item-divider color="light">
      <span>My Current Position</span>
      <button ion-button icon-only clear style="float: right; margin-right: 4px; margin-top: -4px;" (click)="refresh()" >
        <ion-icon name="refresh" ></ion-icon>
      </button>  
    </ion-item-divider>

    <button ion-item (click)="showInformation(dataManager.currentPosition)" >
      <ion-avatar item-left>
        <ion-icon [name]="'CUP' | typeIcon "></ion-icon>
      </ion-avatar> 
      <h2>{{dataManager.currentPosition.fullName}}</h2>
      <ion-badge item-right [color]="dataManager.currentPosition.countyIncidents.length  | incidentColor" >{{dataManager.currentPosition.countyIncidents.length}}</ion-badge>
      <ion-badge item-right [color]="dataManager.currentPosition.stateIncidents.length   | incidentColor" >{{dataManager.currentPosition.stateIncidents.length}}</ion-badge>
      <ion-badge item-right [color]="dataManager.currentPosition.countryIncidents.length | incidentColor" >{{dataManager.currentPosition.countryIncidents.length}}</ion-badge>
    </button>

    <ion-item-divider color="light">

      <span>My Flights and Hotels</span>
      <button ion-button icon-only clear style="float: right; margin-right: 4px; margin-top: -4px;" (click)="addTravel()" >
        <ion-icon name="add" ></ion-icon>
      </button>   

    </ion-item-divider>

       <ion-item-sliding *ngFor="let item of dataManager.itinerary">
        <button ion-item>
          <ion-avatar item-left>
            <ion-icon [name]="item.pointType | typeIcon "></ion-icon>
            <div>{{item.durationName}}</div>
          </ion-avatar>
          <p>{{item.pointName}}</p>
          <h2>{{item.primaryName}}</h2>
          <p>{{item.secondaryName}}</p>
          <ion-badge item-right [color]="item.countyIncidents.length  | incidentColor" >{{item.countyIncidents.length}}</ion-badge>
          <ion-badge item-right [color]="item.stateIncidents.length   | incidentColor" >{{item.stateIncidents.length}}</ion-badge>
          <ion-badge item-right [color]="item.countryIncidents.length | incidentColor" >{{item.countryIncidents.length}}</ion-badge>
        </button>
        <ion-item-options side="right">
          <button ion-button color="danger">
            <ion-icon name="delete"></ion-icon>
            Delete Flight
          </button>
        </ion-item-options>
      </ion-item-sliding>

    
  </ion-list>

</ion-content>
